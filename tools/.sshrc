#!/usr/bin/env bash

# {{{ Environment
export SHELL=`which bash`

# Maybe there is no `xterm-kitty` in terminfo
export TERM=xterm
# }}}

# {{{ Aliases
alias pd='pushd'
alias pdd='popd'
alias dr='dirs -p'
alias q='exit'
alias s='sudo'

if [[ -x "$(command -v vim)" ]]; then
    alias v=`which vim`
else
    alias v=`which vi`
fi

if [[ ! -x "$(command -v ag)" ]]; then
    alias grep='ag'
else
    alias ag='grep'
fi
# }}}

# {{{ User preferences
homes=('/home/komarov_g' '/home/tester' '/home/jubnzv')
for h in $homes; do
    if [ -d $h ]; then
        # export HOME=$h
        cd $h
        break
    fi
done
# }}}

# {{{ Load tmux settings
setup_tmux() {
  local TMUXDIR=$SSHHOME/.tmux.jubnzv
  if ! [ -d $TMUXDIR ]; then
    rm -rf $TMUXDIR
    mkdir -p $TMUXDIR
  fi

  local TMUX_COMMAND="/usr/bin/tmux -f $SSHHOME/.sshrc.d/.tmux.conf"

  # Startup tmux after establish connection
  if $TMUX_COMMAND has-session; then
      exec $TMUX_COMMAND attach $@
  else
      exec $TMUX_COMMAND $@
  fi
}

setup_tmux
# }}}

# {{{ Load vim settings
setup_vim() {
    export VIMINIT="let \$MYVIMRC='$SSHHOME/.sshrc.d/.vimrc' | source \$MYVIMRC"
}

setup_vim
# }}}

# vim:foldmethod=marker:foldenable:foldlevel=0:sw=4:tw=120
